;(function($, scope){	scope['el'] = {		init : function(){					},		loadSubMenu:function(_alias,idEl){			var li = "";			www.el.parentID = idEl;			www.el.wDefault = $("#"+idEl).attr('wd');			if($.trim($(".row-menu-item").html()=="")){				$.each(subElements,function(x,y){					if(y.parent==_alias){						li += "<li><a href='javascript:void(0)' id='"+y._id+"' alias='"+y.alias+"' parentid='"+idEl+"' onclick='eSMenu(this)'>"+y.name+"</a></li>";					}				});			}			$(".row-menu-item").html("<ul>"+li+"</ul>");						$(".row-menu-item").show();		},		maxZindex:function(){			var zIndex = arrayZIndex.max()+50;			arrayZIndex.push(zIndex);			return zIndex;		},		save:function(){			var objectDiv = www.el.pool.objectDiv;			var content = "";						var _attributes = {picture:[],title:[],paragraph:[],video:[],gallery:[],slideshow:[],contact:[],html:[],line:[],area:[],menu:[],	submenu:[],widget:[]};			var _html = {				picture:[],title:[],paragraph:[],video:[],gallery:[],slideshow:[],				contact:[],html:[],line:[],area:[],menu:[],submenu:[],widget:[]			};			if(objectDiv.length==0){				toastObject =  $().toastmessage('showWarningToast','Can\'t save page. Please choose an element');				return;			}else{								$.each(objectDiv,function(x,y){					var obj = $("#"+y[0]);					switch(y[1]){						case "picture":														_attributes.picture.push([y[0],['name',obj.attr('name')],['class',obj.attr('class')],['no_edited',obj.attr('no_edited')],['default',obj.attr('default')],['id',obj.attr('id')],['style',obj.attr('style')],['wd',obj.attr('wd')]]);														_html.picture.push([y[0],'<img src="'+obj.attr('default')+'">']);													break;						case "video":							_attributes.video.push([y[0],['name',obj.attr('name')],['class',obj.attr('class')],['default',obj.attr('default')],['id',obj.attr('id')],['style',obj.attr('style')],['wd',obj.attr('wd')]]);														_html.video.push([y[0],'<img src="'+obj.attr('default')+'">']);						break;					}				})			}			// console.log(_attributes);			// return false;			/** Request save site **/			loading();			$.ajax({				type:"POST",				url:homeURL+"/www/pages/save",				data:{sId:sId,attr:_attributes,html:_html},				success:function(res){					if(!res.error){						toastObject =  $().toastmessage('showSuccessToast',res.message);					}					deLoading();				},error:function(xhr,textXHR){					deLoading();					toastObject =  $().toastmessage('showErrorToast',xhr.status+" "+xhr.statusText);									}			});		},		resize:function(id){			/**				Resizable Iframe Picture			**/			id.resizable({				handles: "n, e, s, w, ne, se, sw, nw" ,				minWidth:133,				minHeight:133,				create:function(event,ui){					$(this).removeClass('ui-resizable');				},				resize:function(event,ui){				},				start:function(event,ui){					$(this).addClass('opacity');				},				stop:function(event,ui){					var _this = $(this);					/** check max width & height iframe element picture **/					if(_this.width()>www.ePicture.pool.maxWidthFramePicture || _this.height()>www.ePicture.pool.maxHeightFramePicture){						toastObject = $().toastmessage('showWarningToast',www.ePicture.msg.maxWidthHeight + " ["+scope.ePicture.pool.maxWidthFramePicture+" x "+scope.ePicture.pool.maxHeightFramePicture+"]");						_this.css({							width:_this.find('img').width(),							height:_this.find('img').height()						});						_this.removeClass('opacity');						return false;					}										/** Request resize image **/					loading();					$.ajax({						type:"POST",						url:homeURL+"/www/elements/resize",						data:{width:_this.width(),height:_this.height(),checkImgDefault:www.ePicture.pool.checkImgDefault,img:_this.attr('default')},						success:function(res){							if(!res.error){								_this.find('img').attr('src',res.name);								var w = res.imageInfo[0]+"px";								var h = res.imageInfo[1]+"px";								_this.css({									width:w,									height:h								});							}							deLoading();							_this.removeClass('opacity');						},error:function(xhr,textXHR){							deLoading();							_this.removeClass('opacity');							toastObject =  $().toastmessage('showErrorToast',xhr.status+" "+xhr.statusText);													}					});				}			});		},		drap:function(id){			id.draggable({				scroll: true,				cursor: "move",				containment: "parent",				start:function( event, ui ) {					$(this).css({						zIndex:www.ePicture.createZindex(0)					});					hiddenBorderAndToolBar();					displayBorderAndToolBar($(this));				}			});		},		callbacks : {},		msg:{		},		trace:{			objLoadLast:null		},		pool : {			checkDown:false,			idContent : $("#content"),			objectDiv:[]		},		parentID : null,		wDefault : null			}})(jQuery, www);$(document).ready(function(e) {	$(document).keypress(function(e){			});	$("#content").click(function(e){		$(".row-menu-item").hide();		$("#pages").slideUp();		$("#element").slideUp();		$("#settings").slideUp();		hiddenBorderAndToolBar();			});});function eSMenu(obj){	var _this = $(obj);		var parentid = www.el.parentID;	var id = _this.attr('id');	var alias = _this.attr('alias');		switch(alias){		case "replacevideo":			$("#titlePopupVideo").html('Replace Video');			$("#note_popupVideo").html("Tips: Replace video from link youtube");			$("#popupVideo").trigger('click');			$("#idreveiceVideo").val(parentid);		break;		case "picturepic":			$("#titlePopup").html('Replace Picture');			$("#note_popup").html("Tips: Picture types and sizes	. Picture must be less than 4mb each . Flash must be one of these file types: .png, .jpg, .gif");			$("#popup").trigger('click');			$("#idreveice").val(parentid);					break;		case "crop":			var idCrop = alias+"-"+parentid;			www.el.wDefault = $("#"+parentid).attr('wd');			var html = "<div style='width:100%'>"			+"<div style='margin:50px auto;width:"+www.el.wDefault+";'>"			+"<img src='"+$("#"+parentid).attr('no_edited')+"' id='"+idCrop+"' receive='"+parentid+"'>"			+"</div>"			+"</div>";			$(".content-background").html(html);			var ojIDCrop = $("#"+idCrop);			www.ePicture.idPictureCrop = ojIDCrop;			ojIDCrop.Jcrop({				onSelect:   showCoords,				onRelease:  clearCoords			});						$(".modals").fadeToggle();		break;	}}function displayBorderAndToolBar(_this){		if(_this.find('.toolbar-element').hasClass('hidden')){			_this.find('.toolbar-element').removeClass('hidden');		}		if(_this.find('.ui-resizable-ne').hasClass('hidden')){			_this.find('.ui-resizable-ne').removeClass('hidden');		}		if(_this.find('.ui-resizable-se').hasClass('hidden')){			_this.find('.ui-resizable-se').removeClass('hidden');		}		if(_this.find('.ui-resizable-sw').hasClass('hidden')){			_this.find('.ui-resizable-sw').removeClass('hidden');		}		if(_this.find('.ui-resizable-nw').hasClass('hidden')){			_this.find('.ui-resizable-nw').removeClass('hidden');		}		_this.css({			border:'1px solid #333',			boxShadow:'0 0 3px 3px #888'		});}function hiddenBorderAndToolBar(){		$.each($('.toolbar-element'),function(x,y){			if(!$(this).hasClass('hidden')){				$(this).addClass('hidden');			}		});		$.each($('.ui-resizable-ne'),function(x,y){			if(!$(this).hasClass('hidden')){				$(this).addClass('hidden');			}		});		$.each($('.ui-resizable-se'),function(x,y){			if(!$(this).hasClass('hidden')){				$(this).addClass('hidden');			}		});		$.each($('.ui-resizable-sw'),function(x,y){			if(!$(this).hasClass('hidden')){				$(this).addClass('hidden');			}		});		$.each($('.ui-resizable-nw'),function(x,y){			if(!$(this).hasClass('hidden')){				$(this).addClass('hidden');			}		});		$.each($('.e-picture'),function(x,y){			$(this).css({				border:'none',				boxShadow:'none'			});		});}